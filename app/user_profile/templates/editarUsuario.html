{% extends "base.html" %}
{% load staticfiles %}
{% load thumbnail %}

{% block titulo %}
  Bingos Marvel | Editar Usuario
{% endblock titulo %}

{% block titulo_page %}
  Editar Usuario
{% endblock titulo_page %}


{% block main %}
              <div class="row">
                  <div class="col-lg-12">
                      <section class="panel">
                          <header class="panel-heading">
                             Editar Usuario
                          </header>
                          <div class="panel-body">
                              <form class="form-horizontal " method="get" id="editUsuario">
                              {%csrf_token%}
                              {{form.id}}
                                  <div class="form-group">
                                    <!--Error -->
                                    <div class="alert alert-danger alert-dismissable"style="display:none;width:98%;margin:auto" id="ErrorNombre">
                                      <strong>Error!</strong> 
                                        <span>Indicates a successful or positive action.</span>  
                                    </div>
                                    <div id="ErrorNombreBR" style="display:none"><br></div>
                                    <!--Fin Error -->
                                    
                                    <label class="col-sm-2 control-label">
                                        {{form.first_name.label}}
                                     </label>
                                    <div class="col-sm-10">
                                      {{form.first_name}}
                                    </div>
                                  </div>

                                  <div class="form-group">
                                    <!--Error -->
                                    <div class="alert alert-danger alert-dismissable"style="display:none;width:98%;margin:auto" id="ErrorApellido">
                                      <strong>Error!</strong> 
                                        <span>Indicates a successful or positive action.</span>  
                                    </div>
                                    <div id="ErrorApellidoBR" style="display:none"><br></div>
                                    <!--Fin Error -->
                                      <label class="col-sm-2 control-label">
                                        {{form.last_name.label}}
                                      </label>
                                      <div class="col-sm-10">
                                        {{form.last_name}}
                                      </div>
                                  </div>

                                  <div class="form-group">
                                    <!--Error -->
                                    <div class="alert alert-danger alert-dismissable"style="display:none;width:98%;margin:auto" id="ErrorTelefono">
                                      <strong>Error!</strong> 
                                        <span>Indicates a successful or positive action.</span>  
                                    </div>
                                    <div id="ErrorTelefonoBR" style="display:none"><br></div>
                                    <!--Fin Error -->

                                      <label class="col-sm-2 control-label">
                                        {{form.telefono.label}}
                                      </label>
                                      <div class="col-sm-10">
                                        {{form.telefono}}
                                      </div>
                                  </div>
   
                                  <div class="form-group">
                                    <!--Error -->
                                    <div class="alert alert-danger alert-dismissable"style="display:none;width:98%;margin:auto" id="ErrorNick">
                                      <strong>Error!</strong> 
                                        <span>Indicates a successful or positive action.</span>  
                                    </div>
                                    <div id="ErrorNickBR" style="display:none"><br></div>
                                    <!--Fin Error -->

                                      <label class="col-sm-2 control-label">
                                        {{form.username.label}}
                                      </label>
                                      <div class="col-sm-10">
                                        {{form.username}}
                                      </div>
                                  </div>

                                  <div class="form-group">
                                    <!--Error -->
                                    <div class="alert alert-danger alert-dismissable"style="display:none;width:98%;margin:auto" id="ErrorEmail">
                                      <strong>Error!</strong> 
                                        <span>Indicates a successful or positive action.</span>  
                                    </div>
                                    <div id="ErrorEmailBR" style="display:none"><br></div>
                                    <!--Fin Error -->

                                      <label class="col-sm-2 control-label">
                                        {{form.email.label}}
                                      </label>
                                      <div class="col-sm-10">
                                        {{form.email}}
                                      </div>
                                  </div>
                                  <div class="form-group">
                                      <label class="col-sm-2 control-label">
                                        {{form.sala.label}}
                                      </label>
                                      <div class="col-sm-10">
                                        {{form.sala}}
                                      </div>
                                  </div>

                    <div class="form-group" style="margin-left:20px;overflow:hidden">
                          
                          <a href="" id="triggerFile" style="padding:0px;box-sizing:border-box">
                          <label for="">Avatar</label><br>
                          {% thumbnail object.userprofile.thumb "200x200" crop="center" as im %}
                              <img width="200px" height="200px" id="blah" class="img-border" src=
                              "{{ im.url }}">   
                            {% endthumbnail %}
                           </a>
                        {{form.thumb}}
                      </div>

                      <div class="form-group">
                        <div class="col-md-9 col-sm-9 col-xs-12">
                          <button type="button" class="btn btn-primary" onclick="Javascript:location.href='/usuario/';void(0);">Cancelar</button>
                          <button type="submit" class="btn btn-success">Guardar</button>
                        </div>
                      </div>


                  </form>

            
                          </div>

                      </section>  
          </div>
        </div>
  

{% endblock main %}


{% block js %}
  


<script>
//CARGAR DATOS DE USER PROFILE
 $('#id_telefono').val('{{view.telefono}}');
  $('#id_sala').val('{{view.sala}}');

$('#triggerFile').on('click', function(e){
        e.preventDefault()
        $("#id_thumb").trigger('click')
    });
</script>
<!-- cargar img -->
<script>
  function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function (e) {
            $('#blah').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
    }
}

$("#id_thumb").change(function(){
    readURL(this);
});
</script>


<script src="{% static "js/users_scripts.js" %}"></script>
{% endblock js %}